<link rel="icon" type="image/png" href="/images/quad16.png">
<link rel="stylesheet" type="text/css" href="main.css">
<meta name="viewport" content="width=device-width, initial-scale=1.0,minimum-scale=1.0">

<div class="headerdiv" id="header"></div>
<script src="header.js"></script>

<h1> Welcome </h1>

<p>
Welcome to my blog. Built with HTML in Pittsburgh, PA.
</p>

<h2> How to set up network interface bonding with netctl / Archlinux </h2>

<p style="text-align: center"> 2021-03-06 </p> <br>

<p>
Bonding is a useful type of Linux network interface that allows two or more network interfaces to be used for the same LAN. One use case is when a wired and wireless connection are both used and the wired connection should be preferred if the Ethernet cable is connected. This allows seamless switching between using the wired and wireless connection as the cable is plugged and unplugged.
</p> <br>

<p>
Below are the netctl configuration files I use.
The bond mode should be set to <code>active-backup</code>.
Note that the IP configuration is set in the bond configuration file, and not in the individual interface configurations.
There is no configuration file for the ethernet interface because all that's needed to be done is for the interface to be brought up. netctl will bring up all interfaces listed in <code>BindsToInterfaces</code> when the bond configuration is started.
</p> <br>

<p>
Be sure to change the interface names <code>eth0</code> and <code>wlan0</code> to match yours, and set the IP and wireless security settings appropriately.
</p> <br>

<p><code>/etc/netctl/bond</code>:</p>
<pre><code>Description='Ethernet primary with wifi backup'
Interface=bond0
Connection=bond
BindsToInterfaces=(eth0 wlan0)
IP=static
IP6=no
Address='192.168.0.XXX/24'
Gateway='192.168.0.1'
DNS='192.168.0.1'
Mode=active-backup
LinkOptions='miimon 100 primary eth0 updelay 100 downdelay 100'</code>
</pre>

<p><code>/etc/netctl/wifi_bond</code>:</p>
<pre>
<code>Description='Wifi for bonding: no IP'
Interface=wlan0
Connection=wireless
Security=wpa
ForceConnect=yes
IP=no
IP6=no
ESSID='WIFI_SSID'
Key=XXXXXXXXXX
</code>
</pre>

<p>
<code>ForceConnect=yes</code> ensures the wifi configuration will not fail to start if the bond configuration has already brought it up.
</p> <br>

<p>
To use this configuration, run
</p>
<pre><code># netctl start bond &amp&amp netctl start wifi_bond</code></pre> <br>

<p>
For a thorough read on bonding, see <a target="_blank" href="https://www.kernel.org/doc/Documentation/networking/bonding.txt">https://www.kernel.org/doc/Documentation/networking/bonding.txt</a>
</p>

<h2> How to use import statement inside of an eval in a ROS roslaunch file </h2>

<p style="text-align: center"> 2021-02-05 </p> <br>

<p>
Since ROS Kinetic (Ubuntu 16.04), roslaunch allows you to eval arbitrary Python expressions.
</p> <br>

<p>
For example, you can do something like the below to manipulate parameters found in two different files.
</p><br>

<!-- HTML generated using hilite.me --><div style="background: #202020; overflow:auto;width:auto;border:solid gray;border-width:0;padding:.1em .1em;"><pre style="margin: 0; line-height: 125%"><span style="color: #6ab825; font-weight: bold">&lt;arg</span> <span style="color: #bbbbbb">name=</span><span style="color: #ed9d13">&quot;parameter&quot;</span> <span style="color: #bbbbbb">default=</span><span style="color: #ed9d13">&quot;$(eval float(open(&#39;config1&#39;).read().strip()) + float(open(&#39;config2&#39;).read().strip()))&quot;</span><span style="color: #6ab825; font-weight: bold">/&gt;</span>
</pre></div>
<br>

<p>
Something I've always wanted to do is to check for the existence of a file. However, since the os module has not been imported in roslaunch's eval environment, this seems impossible to do. Furthermore, roslaunch explicitly forbids double underscores, precluding the use of an expression import with __import__. However, it does so by searching for "__"! See line 345 at <a target="_blank" href=http://docs.ros.org/en/melodic/api/roslaunch/html/roslaunch.substitution_args-pysrc.html>the roslaunch source</a>, which references <a target="_blank" href=https://nedbatchelder.com/blog/201206/eval_really_is_dangerous.html>https://nedbatchelder.com/blog/201206/eval_really_is_dangerous.html</a>
</p> <br>

<p>
  We can get around this by nesting evals and creating the __import__ double underscore method using string addition.
</p> <br>

<!-- HTML generated using hilite.me --><div style="background: #202020; overflow:auto;width:auto;border:solid gray;border-width:0;padding:.1em .1em;"><pre style="margin: 0; line-height: 125%"><span style="color: #6ab825; font-weight: bold">&lt;arg</span> <span style="color: #bbbbbb">name=</span><span style="color: #ed9d13">&quot;configfile&quot;</span> <span style="color: #bbbbbb">default=</span><span style="color: #ed9d13">&quot;$(eval &#39;alternate.txt&#39; if eval(&#39;_&#39; + &#39;_import_&#39; + &#39;_(\&#39;os\&#39;)&#39;).path.exists(&#39;alternate.txt&#39;) else &#39;main.txt&#39;)&quot;</span><span style="color: #6ab825; font-weight: bold">/&gt;</span>
</pre></div>

<h2> How to wire Pixracer Serial to TX2 J121 UART 2 </h2>

<p>
If pin 1 is the GND pin for both the Molex Pico (plugging into J7) and the JST GH (plugging into a UART on the Pixracer), then pin 2 on J7 connects to pin 5 on the JST GH and pin 3 on the J7 connects to pin 4 on the JST GH.
</p>

<p>
To talk to this port from Linux, you may need to use <tt>/dev/ttyTHS1</tt> or <tt>/dev/ttyTHS3</tt>.
</p>
